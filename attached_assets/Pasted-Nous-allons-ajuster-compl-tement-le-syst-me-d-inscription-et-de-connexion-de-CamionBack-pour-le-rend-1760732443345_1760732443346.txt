Nous allons ajuster complÃ¨tement le systÃ¨me dâ€™inscription et de connexion de CamionBack pour le rendre plus fluide et mieux adaptÃ© aux utilisateurs marocains.
Merci dâ€™implÃ©menter les changements suivants ğŸ‘‡

ğŸ” 1ï¸âƒ£ Authentification simplifiÃ©e sans OTP

Supprimer complÃ¨tement lâ€™envoi OTP.

Le numÃ©ro de tÃ©lÃ©phone sera utilisÃ© comme identifiant principal.

Lors de la premiÃ¨re connexion, le nouvel utilisateur choisit un code confidentiel Ã  6 chiffres (par exemple â€œ123456â€).

Ce code servira de mot de passe permanent pour les connexions suivantes.

Les mots de passe Ã  6 chiffres doivent Ãªtre hashÃ©s avec bcrypt et sÃ©curisÃ©s dans la base de donnÃ©es.

Lors dâ€™une future connexion, lâ€™utilisateur entre simplement :

NumÃ©ro de tÃ©lÃ©phone

Code confidentiel Ã  6 chiffres

Ajouter un bouton â€œMot de passe oubliÃ©â€ (non fonctionnel pour le moment, Ã  implÃ©menter plus tard).

â˜ï¸ 2ï¸âƒ£ Format du numÃ©ro de tÃ©lÃ©phone

Garder le prÃ©fixe â€œ+212â€ grisÃ© et fixe (non modifiable).

Lâ€™utilisateur ne saisit que la partie restante du numÃ©ro sous ce format :

6 12 34 56 78

VÃ©rifier automatiquement que le numÃ©ro comporte 9 chiffres aprÃ¨s le +212.

Afficher un message dâ€™erreur clair si le format est incorrect.

ğŸ§­ 3ï¸âƒ£ SÃ©lection du rÃ´le Ã  la premiÃ¨re connexion

AprÃ¨s validation du numÃ©ro de tÃ©lÃ©phone et du code Ã  6 chiffres, afficher une page avec deux grands boutons illustrÃ©s :

ğŸšš Transporteur

ğŸ“¦ ExpÃ©diteur (Client)

Chaque bouton doit comporter une icÃ´ne, un petit texte descriptif et un effet visuel au survol.

Lorsquâ€™un utilisateur clique :

Sâ€™il choisit ExpÃ©diteur, rediriger vers le tableau de bord client.

Sâ€™il choisit Transporteur, rediriger vers une page de complÃ©tion du profil (voir section suivante).

ğŸš› 4ï¸âƒ£ ComplÃ©tion du profil Transporteur

Lorsquâ€™un utilisateur choisit â€œTransporteurâ€, afficher un formulaire obligatoire avec :

Nom complet

Ville de rÃ©sidence (liste dÃ©roulante avec principales villes du Maroc)

TÃ©lÃ©phone (prÃ©rempli avec le numÃ©ro saisi Ã  lâ€™inscription, non modifiable)

Upload dâ€™une photo du camion (obligatoire)

En soumettant, ces donnÃ©es sont sauvegardÃ©es dans la collection drivers.

CÃ´tÃ© admin, un tableau â€œTransporteurs Ã  validerâ€ doit afficher :

Nom complet

Ville

NumÃ©ro de tÃ©lÃ©phone

Photo du camion

Bouton â€œValider / Refuserâ€.

Lâ€™admin peut ajouter une note ou modifier ces informations si besoin.

ğŸ•“ 5ï¸âƒ£ Validation du profil transporteur

Tant que lâ€™admin nâ€™a pas validÃ© le profil, le transporteur peut se connecter, mais voit seulement :

Son tableau de bord normal

Un message en haut de la page indiquant :

â€œğŸ•“ Votre compte est en cours de validation par lâ€™Ã©quipe CamionBack. Vous serez notifiÃ© dÃ¨s son approbation.â€

Une fois validÃ©, le message disparaÃ®t et le transporteur accÃ¨de Ã  toutes les fonctionnalitÃ©s (offres, messages, etc.).

ğŸ’¬ 6ï¸âƒ£ Redirection logique

Une fois le compte validÃ© :

ExpÃ©diteur â†’ vers /dashboard-client

Transporteur validÃ© â†’ vers /dashboard-transporteur

Transporteur en attente â†’ vers /dashboard-transporteur + message dâ€™attente

Admin (dÃ©jÃ  existant) â†’ vers /admin-panel

ğŸ§© 7ï¸âƒ£ Structure technique Ã  garder

Base de donnÃ©es : MongoDB (ou Replit DB selon le setup existant).

Collections Ã  jour : users, drivers, clients, admins.

Chaque utilisateur doit avoir un champ role = â€œclientâ€ ou â€œdriverâ€.

Ajouter un champ status = â€œpendingâ€ | â€œvalidatedâ€ pour les transporteurs.

Les routes et redirections doivent sâ€™adapter selon ces statuts.

Merci de construire ce flux de maniÃ¨re fluide et moderne (boutons illustrÃ©s, champs bien espacÃ©s, interface mobile-first, cohÃ©rente avec le style visuel actuel de CamionBack).

Une fois terminÃ©, je testerai le parcours complet (crÃ©ation â†’ choix rÃ´le â†’ validation admin â†’ connexion) pour mâ€™assurer que tout est cohÃ©rent.